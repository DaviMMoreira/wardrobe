/*! Wardrobe 2013-06-01 */
this.JST=this.JST||{},this.JST["header/list/templates/header.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<div class="navbar navbar-inverse navbar-fixed-top">\n  <div class="navbar-inner">\n    <div class="container">\n\n      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->\n      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </a>\n\n      <!-- Be sure to leave the brand out there if you want it shown -->\n      <a class="brand" href="#">Wardrobe</a>\n\n      <!-- Everything you want hidden at 940px or less, place within here -->\n      <div class="nav-collapse collapse">\n      	<ul class="nav">\n          <li><a href="/wardrobe">Home</a></li>\n          <li class="active"><a href="#post">Posts</a></li>\n        </ul>\n        <!-- .nav, .navbar-search, .navbar-form, etc -->\n      </div>\n\n    </div>\n  </div>\n</div>';return __p},this.JST["post/list/templates/empty.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<td colspan="2">No Records</td>';return __p},this.JST["post/list/templates/grid.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<table>\n	<thead>\n		<tr>\n			<th>ID</th>\n			<th>Title</th>\n		</tr>\n	</thead>\n	<tbody></tbody>\n	<tfoot>\n		<tr>\n			<td colspan="2">\n				<button class="btn js-add">Add Post</button>\n			</td>\n		</tr>\n	</tfoot>\n</table>';return __p},this.JST["post/list/templates/item.html"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+="<td>"+(null==(__t=id)?"":__t)+'</td>\n<td><a href="#" class="details">'+(null==(__t=title)?"":__t)+"</a></td>";return __p},this.JST["post/templates/form.html"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<form>\n	<div id="write">\n		<button class="btn large publish pull-right">Publish Post</button>\n		<input type="text" class="input-xxlarge" name="title" id="title" value="" placeholder="Title">\n		<textarea name="content" id="content" placeholder="Content Goes Here..."></textarea>\n	</div>\n</form>';return __p},function(Backbone){var t,e;return e=Backbone.sync,Backbone.sync=function(r,n,o){var i;return null==o&&(o={}),_.defaults(o,{beforeSend:_.bind(t.beforeSend,n),complete:_.bind(t.complete,n)}),i=e(r,n,o),n._fetch||"read"!==r?void 0:n._fetch=i},t={beforeSend:function(){return this.trigger("sync:start",this)},complete:function(){return this.trigger("sync:stop",this)}}}(Backbone),$.fn.fillJSON=function(t){var e,r,n,o;e=$(this),o=[];for(r in t)n=t[r],o.push(e.find("[name='"+r+"']").val(n));return o},function(Backbone){return _.extend(Backbone.Marionette.Application.prototype,{navigate:function(t,e){return null==e&&(e={}),Backbone.history.navigate(t,e)},getCurrentRoute:function(){var t;return t=Backbone.history.fragment,_.isEmpty(t)?null:t},startHistory:function(){return Backbone.history?Backbone.history.start():void 0},register:function(t,e){var r;return null==(r=this._registry)&&(this._registry={}),this._registry[e]=t},unregister:function(t,e){return delete this._registry[e]},resetRegistry:function(){var t,e,r,n,o;n=this.getRegistrySize(),o=this._registry;for(e in o)t=o[e],t.region.close();return r="There were "+n+" controllers in the registry, there are now "+this.getRegistrySize(),this.getRegistrySize()>0?console.warn(r,this._registry):console.log(r)},getRegistrySize:function(){return _.size(this._registry)}})}(Backbone);var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};(function(Backbone,t){return t.Region.Dialog=function(t){function e(){_.extend(this,Backbone.Events)}return __extends(e,t),e.prototype.onShow=function(t){var e,r=this;return this.setupBindings(t),e=this.getDefaultOptions(_.result(t,"dialog")),this.$el.on("hidden",function(){return r.closeDialog()}),this.$el.on("shown",function(){return Snappy.execute("dialog:shown",t)}),this.$el.modal(e)},e.prototype.getDefaultOptions=function(t){return null==t&&(t={}),_.defaults(t,{backdrop:!0,keyboard:!0,show:!0,remote:!1,shown:null})},e.prototype.setupBindings=function(t){return this.listenTo(t,"dialog:close",this.closeDialog)},e.prototype.closeDialog=function(){return this.stopListening(),this.close(),this.$el.modal("hide")},e}(t.Region)})(Backbone,Marionette),Backbone.Marionette.Renderer.render=function(t,e){var r;if(r=JST[t+".html"],!r)throw"Template "+t+" not found!";return r(e)},this.Wardrobe=function(Backbone){var t;return t=new Backbone.Marionette.Application,t.on("initialize:before",function(){return t.environment=$("meta[name=env]").attr("content")}),t.addRegions({headerRegion:"#header-region",topnavRegion:"#top-region",mainRegion:"#main-region",footerRegion:"footer-region"}),t.addInitializer(function(){return t.module("HeaderApp").start()}),t.reqres.setHandler("default:region",function(){return t.mainRegion}),t.commands.setHandler("register:instance",function(e,r){return"local"===t.environment?t.register(e,r):void 0}),t.commands.setHandler("unregister:instance",function(e,r){return"local"===t.environment?t.unregister(e,r):void 0}),t.on("initialize:after",function(){return this.startHistory()}),t}(Backbone,Marionette),this.Wardrobe.module("Entities",function(t,e,Backbone,r,n,o){return e.commands.setHandler("when:fetched",function(t,e){var r;return r=o.chain([t]).flatten().pluck("_fetch").value(),n.when.apply(n,r).done(function(){return e()})})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e,Backbone){return t.Collection=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(Backbone.Collection)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e,Backbone){return t.Model=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(Backbone.Model)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Entities",function(t,e){var r;return t.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.urlRoot="/api/post",e}(t.Model),t.PostCollection=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r.prototype.model=t.Post,r.prototype.url="/api/post",r}(e.Entities.Collection),r={getAll:function(){var e;return e=new t.PostCollection,e.fetch({reset:!0}),e},getPost:function(e){var r;return r=new t.Post({id:e}),r.fetch(),r},newPost:function(){return new t.Post}},e.reqres.setHandler("post:entities",function(){return r.getAll()}),e.reqres.setHandler("post:entity",function(t){return r.getPost(t)}),e.reqres.setHandler("new:post:entity",function(){return r.newPost()})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},__slice=[].slice;this.Wardrobe.module("Controllers",function(t,e,Backbone,r,n,o){return t.Base=function(t){function r(t){null==t&&(t={}),this.region=t.region||e.request("default:region"),r.__super__.constructor.call(this,t),this._instance_id=o.uniqueId("controller"),e.execute("register:instance",this,this._instance_id)}return __extends(r,t),r.prototype.close=function(){var t;return t=arguments.length>=1?__slice.call(arguments,0):[],delete this.region,delete this.options,r.__super__.close.call(this,t),e.execute("unregister:instance",this,this._instance_id)},r.prototype.show=function(t){return this.listenTo(t,"close",this.close),this.region.show(t)},r}(r.Controller)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,r){return t.CollectionView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.itemViewEventPrefix="childview",e}(r.CollectionView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,r){return t.CompositeView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.itemViewEventPrefix="childview",e}(r.CompositeView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,r){return t.ItemView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.fillJSON=function(){var t;return this.$("form").fillJSON((null!=(t=this.model)?t.toJSON():void 0)||{})},e}(r.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e,Backbone,r){return t.Layout=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(r.Layout)});var __slice=[].slice;this.Wardrobe.module("Views",function(t,e,Backbone,r,n,o){var i;return i=r.View.prototype.remove,o.extend(r.View.prototype,{setInstancePropertiesFor:function(){var t,e,r,n,i;t=arguments.length>=1?__slice.call(arguments,0):[],n=o.pick.apply(o,[this.options].concat(__slice.call(t))),i=[];for(e in n)r=n[e],i.push(this[e]=r);return i},remove:function(){var t;return t=arguments.length>=1?__slice.call(arguments,0):[],"local"===e.environment&&console.info("removing",this),i.apply(this,t)}})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("Views",function(t,e){return t.PostView=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,t),r.prototype.template="post/templates/form",r.prototype.events={"click .publish":"save"},r.prototype.onShow=function(){var t,e;return e=["bold","italic","|","quote","unordered-list","ordered-list","|","link","image","|","undo","redo"],t=new Editor({toolbar:e}),t.render()},r.prototype.save=function(t){return t.preventDefault(),this.model.save({title:this.$("#title").val(),content:this.$("#content").val()},{success:function(){return console.log("IT SAVED"),e.vent.trigger("post:load")},error:function(){return console.log("IT ERRORED")}}),this},r}(e.Views.ItemView)}),this.Wardrobe.module("HeaderApp",function(t,e){var r;return this.startWithParent=!1,r={list:function(){return new t.List.Controller({region:e.headerRegion})}},t.on("start",function(){return r.list()})});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("HeaderApp.List",function(t,e){return t.Controller=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r.prototype.initialize=function(){var t;return t=this.getListView(),this.show(t)},r.prototype.getListView=function(){return new t.Header},r}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("HeaderApp.List",function(t,e){return t.Header=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template="header/list/templates/header",e.prototype.tagName="header",e}(e.Views.ItemView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.Edit",function(t,e){return t.Controller=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,r),n.prototype.initialize=function(t){var r,n,o=this;return n=t.post,r=t.id,n||(n=e.request("post:entity",r)),this.listenTo(n,"updated",function(){return e.vent.trigger("post:updated",n)}),e.execute("when:fetched",n,function(){var t;return t=o.getEditView(n),o.show(t)})},n.prototype.getEditView=function(e){return new t.Post({model:e})},n}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.Edit",function(t,e){return t.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.onRender=function(){return this.fillJSON()},e}(e.Views.PostView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.List",function(t,e){return t.Controller=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,r),n.prototype.initialize=function(){var t,r=this;return t=e.request("post:entities"),e.execute("when:fetched",t,function(){var e;return e=r.getListView(t),r.show(e)})},n.prototype.getListView=function(e){return new t.Posts({collection:e})},n}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.List",function(t,e){return t.PostItem=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,t),r.prototype.template="post/list/templates/item",r.prototype.tagName="tr",r.prototype.className="post-item",r.prototype.events={"click .details":"edit"},r.prototype.edit=function(t){return t.preventDefault(),e.vent.trigger("post:item:clicked",this.model)},r}(e.Views.ItemView),t.Empty=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template="post/list/templates/empty",e.prototype.tagName="tr",e}(e.Views.ItemView),t.Posts=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,r),n.prototype.template="post/list/templates/grid",n.prototype.itemView=t.PostItem,n.prototype.emptyView=t.Empty,n.prototype.itemViewContainer="tbody",n.prototype.events={"click .js-add":"newPost"},n.prototype.newPost=function(t){return t.preventDefault(),e.vent.trigger("post:new:clicked")},n}(e.Views.CompositeView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.New",function(t,e){return t.Controller=function(r){function n(){return n.__super__.constructor.apply(this,arguments)}return __extends(n,r),n.prototype.initialize=function(){var t,r;return t=e.request("new:post:entity"),this.listenTo(t,"created",function(){return e.vent.trigger("post:created",t)}),r=this.getNewView(t),this.show(r)},n.prototype.getNewView=function(e){return new t.Post({model:e})},n}(e.Controllers.Base)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp.New",function(t,e){return t.Post=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(e.Views.PostView)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function r(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};this.Wardrobe.module("PostApp",function(t,e,Backbone,r){var n;return t.Router=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.appRoutes={post:"list","post/add":"add","post/edit/:id":"edit"},e}(r.AppRouter),n={list:function(){return new t.List.Controller},add:function(){return new t.New.Controller},edit:function(e,r){return new t.Edit.Controller({id:e,post:r})}},e.vent.on("post:load",function(){return e.navigate("post/"),n.list()}),e.vent.on("post:new:clicked",function(){return e.navigate("post/add"),n.add()}),e.vent.on("post:item:clicked",function(t){return e.navigate("post/edit/"+t.id),n.edit(t.id,t)}),e.addInitializer(function(){return new t.Router({controller:n})})});